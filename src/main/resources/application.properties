server.forward-headers-strategy=framework
spring.application.name=m3u8-encoder-service
spring.config.import=optional:file:.env[.properties]

# Default to R2 profile for S3Client and S3Presigner beans
spring.profiles.active=${SPRING_PROFILES_ACTIVE:r2}

# per file
spring.servlet.multipart.max-file-size=6GB
# total of all parts
spring.servlet.multipart.max-request-size=6GB
# write to disk after this size
spring.servlet.multipart.file-size-threshold=600MB
spring.servlet.multipart.location=${UPLOAD_LOCATION:/tmp/uploads}


# CLOUD STORAGE and profiles moved to .env

# MONGO
spring.data.mongodb.uri=${MONGODB_URI:mongodb://localhost:27017/m3u8}

upload.parallel.enabled=true

# Set up the Token Issuer uri
spring.security.oauth2.resourceserver.jwt.issuer-uri=${ISSUER_URI:https://keycloak.mytelevision.tv/realms/mytv-realm}
jwt.auth.converter.resource-id=${RESOURCE_ID:mytv-authentification-service}
jwt.auth.converter.principal-attribute=preferred_username


# Security & Proxy Configuration
security.jwt.secret=${JWT_SECRET:my-secure-hls-secret-key-that-is-very-long-and-secure-for-production-use}
security.jwt.expiration-minutes=${JWT_EXPIRATION_MINUTES:15}
security.jwt.buffer-minutes=${JWT_BUFFER_MINUTES:30}

# Server Configuration for Proxy URLs
server.port=${SERVER_PORT:8080}

# To be changed after deployment to (https)
protocol=http

# HLS Encryption Configuration
hls.encryption.enabled=${HLS_ENCRYPTION_ENABLED:true}

# Actuator Configuration
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true

# Eureka Spring
eureka.client.fetch-registry=true
eureka.client.register-with-eureka=true
eureka.instance.prefer-ip-address=${PREFER_IP_ADDRESS:true}
eureka.client.serviceUrl.defaultZone=${EUREKA_DEFAULT_ZONE:http://localhost:8761/eureka/}
eureka.instance.instance-id=${spring.application.name}:${spring.application.instance_id:${random.value}}

